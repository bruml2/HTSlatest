<html lang="en" class="text-gray-900 leading-tight">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Timeline Studio A</title>
  <link rel="icon" href="favicon.png">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <link rel="stylesheet" href="build/tailwind.css">
</head>

<body class="min-h-screen">
  <div id="container" class="container mx-auto bg-red-50">
    <header
      class="bg-crimson mx-4 my-2 rounded-md flex justify-center items-center text-white font-serif">
      <div class="mr-8 text-center text-lg text-white font-bold">
        History Timeline Studio</div>
      <div>v 1.0</div>
    </header>

    <section id="selecttl"
      class="mx-4 my-4 px-4 py-2 border border-blue-600 rounded-md">
      <span>Select an existing timeline or clone an existing timeline or</span>
      <a href="#" class="inline-block ml-4 px-3 rounded shadow-lg bg-indigo-400 hover:bg-indigo-300 text-sm text-white tracking-wide font-semibold">Create a new timeline</a>
      <div id="availtlscontainer"
        class="mt-3 px-4 py-2 border border-blue-600 rounded-md">
        <ul id="availtlslist">
          <!-- available timelines will be listed here -->
        </ul>
      </div>
    </section>

    <section id="titleDatesInput"
             class="mx-4 my-4 px-4 py-2 border border-blue-600 rounded-md">
      <div id="titleDatesDisplay" class="mt-1 mb-4 px-2 py-2 border-2 border-blue-600">
        <header class="px-3 py-1.5 border border-red-500">
          <span id="titleDisp" class="text-xl font-serif font-bold">Foo Bar:</span>&nbsp;
          <span id="subtitleDisp" class="text-lg font-serif"></span>
        </header>
        <section id="timeline"
          class="h-20 mt-2 relative bg-yellow-100 border border-black">
          <!-- svg is created here -->
          <span id="startYearDisp" class="absolute left-2 bottom-2 bg-red-300">1900</span>
          <span id="stopYearDisp"  class="absolute right-2 bottom-2 bg-red-100">1990</span>
        </section>
      </div>

      <form id="titleDatesForm" class="font-sans text-sm" action="" method="">
        <fieldset class="mt-3 px-4 py-2 border-2 rounded border-gray-400">
          <legend class="font-bold">&nbsp;&nbsp;Timeline Title and Dates&nbsp;&nbsp;</legend>
          <label class="block mb-1.5">
            <span class="text-gray-700">Title</span>
            <input type="text" id="titleInp" class="form-input mt-1 block w-full focus:ring-indigo-400"/>
          </label>
          <label class="block mb-1.5">
            <span class="text-gray-700">Subtitle</span>
            <input type="text" id="subtitleInp" class="form-input mt-1 block w-full focus:ring-indigo-400" />
          </label>
          <label class="inline-block">
            <span class="text-gray-700">Start Year</span><br>
            <input type="number" id="startYearInp" name="startYear" min="-2000" max="2019"
                   style="width: 5.3em;" step="10"
                   class="form-input mt-1 w-full focus:ring-indigo-400"/>
          </label>
          <label class="inline-block ml-6">
            <span class="text-gray-700">Stop Year</span><br>
            <input type="number" id="stopYearInp" name="stopYear" min="-2000" max="2021"
                   style="width: 5.3em;" step="10"
                   class="form-input mt-1 w-full focus:ring-indigo-400"/>
          </label>
          <div class="inline-block">
            Start and stop years are multiples of 10. For BCE enter a negative number.
          </div>
          <!-- pop-up dialog box containing a form -->
          <dialog id="tickDialog">
            <form method="dialog">
              <p><label>Tick Interval:
                <select>
                  <option></option>
                  <option>100</option>
                  <option>50</option>
                  <option>25</option>
                  <option>20</option>
                  <option>10</option>
                </select>
              </label></p>
              <menu>
                <button value="cancel">Cancel</button>
                <button id="confirmBtn" value="default">Confirm</button>
              </menu>
            </form>
          </dialog>
          <menu>
            <button id="customIntervalBtn">Custom Tick Interval</button>
          </menu>
          <output aria-live="polite"></output>+
        </fieldset>
      </form>
    </section>

    <section id="tldisplay"
      class="mx-4 my-4 p-8 overflow-auto border border-blue-600 rounded-md text-center outline-black">
      This is the timeline display area.
    </section>

    <section id="example"
             class="mx-4 my-4 px-8 py-2 bg-gray-400 rounded-md">
      <div class="mt-0">
        <a href="#" class="inline-block px-5 py-3 rounded-lg shadow-lg bg-indigo-500 hover:bg-indigo-400 text-sm text-white uppercase tracking-wider font-semibold">Book your escape</a>
      </div>
      <div>
        <a href="">link text<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="display: inline-block"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
      </div>
    </section>

    <section id="loginInfo"
      class="hidden mx-4 my-4 px-4 py-2 border border-blue-600 rounded-md">
      <form class="font-sans text-sm" action="" method="POST">
        <fieldset class="px-4 py-2 border-2 rounded border-gray-400">
          <legend class="font-bold">&nbsp;&nbsp;Login Information&nbsp;&nbsp;</legend>
          <label class="block mb-1.5">
            <span class="text-gray-700">Email</span>
            <input type="text" class="form-input mt-1 block w-full" />
          </label>
          <label class="block">
            <span class="text-gray-700">Password</span>
            <input type="password" class="form-input mt-1 block w-full" />
          </label>
        </fieldset>
      </form>
    </section>
  </div> <!-- id="container" -->

  <!-- SCRIPT-->
  <script>
    // display available timelines (todo: from db)
    let availTLs = [
      {id: 1,
       title: "The Hebrew Bible:",
       subtitle: "eras and their precipitating events"},
      {id: 2,
       title: "Beethoven:", subtitle: "his life and works"},
    ];
    function displayAvailTLs(availTLs, filterProp="", filterValue="") {
      const toBeDisplayed = availTLs
      if (filterProp) {
        toBeDisplayed = availTLs.filter((item) => item[filterProp] == filterValue)
      }
      const availtlslistEl = document.querySelector('#availtlslist')
      toBeDisplayed.forEach(tl => {
        let newListItem = document.createElement('li')
        newListItem.id = tl.id
        newListItem.innerHTML =
          `<a href="#" class="inline-block mr-3 px-1 rounded shadow-md bg-indigo-400 hover:bg-indigo-600 text-xs text-white tracking-wide font-semibold">select</a>
          <span class="font-bold">${tl.title}</span>
          <span class="italic">${tl.subtitle}</span>`;
        availtlslistEl.appendChild(newListItem)
      })
    }
    displayAvailTLs(availTLs)

    // transfer inputs to responsive displays;
    let inpDispSelectorsArr = [
        ['#titleInp', '#titleDisp'],
        ['#subtitleInp', '#subtitleDisp'],
        ['#startYearInp', '#startYearDisp'],
        ['#stopYearInp', '#stopYearDisp']
    ]
    inpDispSelectorsArr.forEach(([inp, disp]) => {
      let inpEl  = document.querySelector(inp)
      let dispEl = document.querySelector(disp)
      inpEl.addEventListener('input', function (ev) {
        dispEl.innerHTML = this.value;
      })
    })

  </script>
</body>
</html>
